<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>–¢–µ—Å—Ç—ã</title>
    <meta charset="UTF-8">
</head>
<style>
    :root {
        --primary: #1a85fa;
        --primary-light: #e3f2fd;
        --secondary: #182f95;
        --accent: #42a5f5;
        --white: #fff;
        --gray-light: #f5f5f5;
        --gray-dark: #424242;
    }

    body {
        margin: 0;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: var(--gray-light);
        color: var(--gray-dark);
    }

    a {
        text-decoration: none;
        color: inherit;
    }

    header {
        background: var(--primary);
        color: var(--white);
        padding: 1rem 2rem;
        display: flex;
        justify-content: space-between;
        align-items: center;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }

    .logo h1 {
        margin: 0;
        font-size: 1.6rem;
        font-weight: bold;
    }

    .auth-links a {
        color: var(--white);
        text-decoration: none;
        font-weight: 500;
        margin-left: 1rem;
        padding: 0.4rem 1rem;
        border-radius: 4px;
        transition: background-color 0.3s ease;
    }
    .auth-links a:hover {
        background: rgba(255,255,255,0.15);
    }
    .auth-links a.register {
        background: var(--accent);
    }
    .auth-links a.register:hover {
        background: var(--difficult);
    }

    nav {
        background: var(--white);
        padding: 1rem 2rem;
        box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    }
    nav ul {
        list-style: none; padding: 0; margin: 0;
        display: flex; justify-content: center; gap: 1.5rem;
    }
    nav a {
        color: var(--primary);
        font-weight: 600;
        text-decoration: none;
        position: relative;
        padding-bottom: 4px;
    }
    nav a::after {
        content: '';
        position: absolute;
        width: 0; height: 2px; bottom: 0; left: 0;
        background: var(--accent);
        transition: width 0.3s ease;
    }
    nav a:hover {
        color: var(--accent);
    }
    nav a:hover::after {
        width: 100%;
    }

    .content {
        max-width: 800px;
        margin: 2rem auto;
        padding: 0 2rem;
    }
    h2 {
        color: var(--secondary);
        border-bottom: 2px solid var(--accent);
        padding-bottom: 0.5rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    /* Test styles */
    .test-container {
        background: var(--white);
        border-radius: 10px;
        padding: 2rem;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        margin-top: 1.5rem;
    }

    .question-container {
        display: none;
    }

    .question-container.active {
        display: block;
        animation: fadeIn 0.5s;
    }

    .question {
        font-size: 1.2rem;
        margin-bottom: 1.5rem;
        font-weight: 600;
        color: var(--secondary);
    }

    .options {
        display: grid;
        grid-template-columns: 1fr;
        gap: 1rem;
        margin-bottom: 2rem;
    }

    .option {
        padding: 1rem;
        border: 2px solid var(--primary-light);
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
        background: var(--white);
    }

    .option:hover {
        background: var(--primary-light);
        border-color: var(--accent);
    }

    .option.correct {
        background: #E8F5E9;
        border-color: var(--correct);
        color: var(--correct);
    }

    .option.incorrect {
        background: #FFEBEE;
        border-color: var(--incorrect);
        color: var(--incorrect);
    }

    .progress-container {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 1.5rem;
    }

    .progress-bar {
        height: 10px;
        background: var(--primary-light);
        border-radius: 5px;
        flex-grow: 1;
        margin: 0 1rem;
    }

    .progress-fill {
        height: 100%;
        background: var(--accent);
        border-radius: 5px;
        width: 0%;
        transition: width 0.5s ease;
    }

    .score-display {
        font-weight: bold;
        color: var(--secondary);
    }

    .xp-gained {
        display: none;
        text-align: center;
        font-size: 1.1rem;
        margin-top: 1rem;
        color: var(--correct);
        font-weight: bold;
    }

    .next-btn, .submit-btn, .restart-btn {
        background: var(--accent);
        color: var(--white);
        border: none;
        padding: 0.8rem 1.5rem;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        font-size: 1rem;
        transition: background 0.3s ease;
        display: block;
        margin: 0 auto;
    }

    .next-btn:hover, .submit-btn:hover, .restart-btn:hover {
        background: var(--secondary);
    }

    .result-container {
        display: none;
        text-align: center;
        padding: 2rem;
    }

    .result-title {
        font-size: 1.5rem;
        color: var(--secondary);
        margin-bottom: 1rem;
    }

    .result-score {
        font-size: 2rem;
        font-weight: bold;
        color: var(--primary);
        margin: 1rem 0;
    }

    .result-message {
        margin-bottom: 1.5rem;
    }

    .streak-container {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.5rem;
        margin-top: 1rem;
    }

    .streak-icon {
        color: #FFC107;
        font-size: 1.5rem;
    }

    .streak-count {
        font-weight: bold;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(10px); }
        to { opacity: 1; transform: translateY(0); }
    }

    @keyframes bounce {
        0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
        40% { transform: translateY(-15px); }
        60% { transform: translateY(-7px); }
    }

    .celebration {
        animation: bounce 1s;
        display: inline-block;
    }
    .logo-link {
        text-decoration: none;
        color: inherit;
    }
</style>
<body>
<header>
    <div class="logo">
        <a th:href="@{/index}" class="logo-link">
            <h1>Qazaq Til</h1>
        </a>
    </div>
    <div class="auth-links">
        <a th:href="@{/login}">–í–æ–π—Ç–∏</a>
        <a th:href="@{/register}" class="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
    </div>
</header>

<nav>
    <ul>
        <li><a th:href="@{/dictionary}">Dictionary</a></li>
        <li><a th:href="@{/topics}">Topics</a></li>
        <li><a th:href="@{/tests}">Tests</a></li>
        <li><a th:href="@{/alphabet}">Alphabet</a></li>
        <li><a th:href="@{/courses}">Courses</a></li>
        <li><a th:href="@{/profile}">Profile</a></li>
    </ul>
</nav>

<div class="content">
    <h2>üìù –¢–µ—Å—Ç –ø–æ –∫–∞–∑–∞—Ö—Å–∫–æ–º—É —è–∑—ã–∫—É</h2>

    <div class="test-container">
        <div class="progress-container">
            <span class="score-display">–û—á–∫–∏: <span id="current-score">0</span> XP</span>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-fill"></div>
            </div>
            <span id="question-count">1/10</span>
        </div>

        <div id="question-1" class="question-container active">
            <div class="question">–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–°”ô–ª–µ–º"?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '–ü—Ä–∏–≤–µ—Ç', true)">–ü—Ä–∏–≤–µ—Ç</div>
                <div class="option" onclick="checkAnswer(this, '–ü–æ–∫–∞', false)">–ü–æ–∫–∞</div>
                <div class="option" onclick="checkAnswer(this, '–°–ø–∞—Å–∏–±–æ', false)">–°–ø–∞—Å–∏–±–æ</div>
                <div class="option" onclick="checkAnswer(this, '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞', false)">–ü–æ–∂–∞–ª—É–π—Å—Ç–∞</div>
            </div>
            <div class="xp-gained" id="xp-1">+10 XP</div>
            <button class="next-btn" onclick="nextQuestion(1)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-2" class="question-container">
            <div class="question">–ö–∞–∫ —Å–∫–∞–∑–∞—Ç—å "–°–ø–∞—Å–∏–±–æ" –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '–°–∞—É –±–æ–ª—ã“£—ã–∑', false)">–°–∞—É –±–æ–ª—ã“£—ã–∑</div>
                <div class="option" onclick="checkAnswer(this, '–†–∞—Ö–º–µ—Ç', true)">–†–∞—Ö–º–µ—Ç</div>
                <div class="option" onclick="checkAnswer(this, '–ö–µ—à—ñ—Ä—ñ“£—ñ–∑', false)">–ö–µ—à—ñ—Ä—ñ“£—ñ–∑</div>
                <div class="option" onclick="checkAnswer(this, '–°”ô–ª–µ–º–µ—Ç—Å—ñ–∑ –±–µ', false)">–°”ô–ª–µ–º–µ—Ç—Å—ñ–∑ –±–µ</div>
            </div>
            <div class="xp-gained" id="xp-2">+10 XP</div>
            <button class="next-btn" onclick="nextQuestion(2)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-3" class="question-container">
            <div class="question">–ö–∞–∫ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç—Å—è "—Å–µ–º—å—è"?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '“ö–∞–ª–∞', false)">“ö–∞–ª–∞</div>
                <div class="option" onclick="checkAnswer(this, '–ú–µ–∫—Ç–µ–ø', false)">–ú–µ–∫—Ç–µ–ø</div>
                <div class="option" onclick="checkAnswer(this, '–û—Ç–±–∞—Å—ã', true)">–û—Ç–±–∞—Å—ã</div>
                <div class="option" onclick="checkAnswer(this, '–î–æ—Å', false)">–î–æ—Å</div>
            </div>
            <div class="xp-gained" id="xp-3">+10 XP</div>
            <button class="next-btn" onclick="nextQuestion(3)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-4" class="question-container">
            <div class="question">–ö–∞–∫–æ–µ —Å–ª–æ–≤–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–≤–æ–¥–∞" –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '–ê—Å', false)">–ê—Å</div>
                <div class="option" onclick="checkAnswer(this, '–°—É', true)">–°—É</div>
                <div class="option" onclick="checkAnswer(this, '–®–∞–π', false)">–®–∞–π</div>
                <div class="option" onclick="checkAnswer(this, '–°“Ø—Ç', false)">–°“Ø—Ç</div>
            </div>
            <div class="xp-gained" id="xp-4">+10 XP</div>
            <button class="next-btn" onclick="nextQuestion(4)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-5" class="question-container">
            <div class="question">–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "“ö–æ—à –∫–µ–ª–¥—ñ“£—ñ–∑!"?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏', false)">–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏</div>
                <div class="option" onclick="checkAnswer(this, '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!', true)">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!</div>
                <div class="option" onclick="checkAnswer(this, '–ò–∑–≤–∏–Ω–∏—Ç–µ', false)">–ò–∑–≤–∏–Ω–∏—Ç–µ</div>
                <div class="option" onclick="checkAnswer(this, '–ö–∞–∫ –¥–µ–ª–∞?', false)">–ö–∞–∫ –¥–µ–ª–∞?</div>
            </div>
            <div class="xp-gained" id="xp-5">+15 XP (–ë–æ–Ω—É—Å!)</div>
            <button class="next-btn" onclick="nextQuestion(5)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-6" class="question-container">
            <div class="question">–í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –¥–ª—è "–∫–Ω–∏–≥–∞":</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '“ö–∞–ª–∞–º', false)">“ö–∞–ª–∞–º</div>
                <div class="option" onclick="checkAnswer(this, '–î”ô–ø—Ç–µ—Ä', false)">–î”ô–ø—Ç–µ—Ä</div>
                <div class="option" onclick="checkAnswer(this, '–ö—ñ—Ç–∞–ø', true)">–ö—ñ—Ç–∞–ø</div>
                <div class="option" onclick="checkAnswer(this, '–û—Ä—ã–Ω–¥—ã“õ', false)">–û—Ä—ã–Ω–¥—ã“õ</div>
            </div>
            <div class="xp-gained" id="xp-6">+10 XP</div>
            <button class="next-btn" onclick="nextQuestion(6)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-7" class="question-container">
            <div class="question">–ö–∞–∫ —Å–∫–∞–∑–∞—Ç—å "–Ø –Ω–µ –ø–æ–Ω–∏–º–∞—é" –Ω–∞ –∫–∞–∑–∞—Ö—Å–∫–æ–º?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '–ú–µ–Ω —Ç“Ø—Å—ñ–Ω–±–µ–π–º—ñ–Ω', true)">–ú–µ–Ω —Ç“Ø—Å—ñ–Ω–±–µ–π–º—ñ–Ω</div>
                <div class="option" onclick="checkAnswer(this, '–ú–µ–Ω –±—ñ–ª–µ–º—ñ–Ω', false)">–ú–µ–Ω –±—ñ–ª–µ–º—ñ–Ω</div>
                <div class="option" onclick="checkAnswer(this, '–ú–µ–Ω –∫”©—Ä–µ–º—ñ–Ω', false)">–ú–µ–Ω –∫”©—Ä–µ–º—ñ–Ω</div>
                <div class="option" onclick="checkAnswer(this, '–ú–µ–Ω –∂–∞“õ—Å—ã –∫”©—Ä–µ–º—ñ–Ω', false)">–ú–µ–Ω –∂–∞“õ—Å—ã –∫”©—Ä–µ–º—ñ–Ω</div>
            </div>
            <div class="xp-gained" id="xp-7">+10 XP</div>
            <button class="next-btn" onclick="nextQuestion(7)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-8" class="question-container">
            <div class="question">–ö–∞–∫–æ–µ –∫–∞–∑–∞—Ö—Å–∫–æ–µ —Å–ª–æ–≤–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–µ–¥–∞"?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '–¢–∞–º–∞“õ', true)">–¢–∞–º–∞“õ</div>
                <div class="option" onclick="checkAnswer(this, '–°—É', false)">–°—É</div>
                <div class="option" onclick="checkAnswer(this, '–®–∞–π', false)">–®–∞–π</div>
                <div class="option" onclick="checkAnswer(this, '–ï—Ç', false)">–ï—Ç</div>
            </div>
            <div class="xp-gained" id="xp-8">+10 XP</div>
            <button class="next-btn" onclick="nextQuestion(8)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-9" class="question-container">
            <div class="question">–ö–∞–∫–∞—è —Ñ—Ä–∞–∑–∞ –æ–∑–Ω–∞—á–∞–µ—Ç "–ú–µ–Ω—è –∑–æ–≤—É—Ç..."?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '–ú–µ–Ω—ñ“£ –∞—Ç—ã–º...', true)">–ú–µ–Ω—ñ“£ –∞—Ç—ã–º...</div>
                <div class="option" onclick="checkAnswer(this, '–ú–µ–Ω...', false)">–ú–µ–Ω...</div>
                <div class="option" onclick="checkAnswer(this, '–°–µ–Ω—ñ“£ –∞—Ç—ã“£...', false)">–°–µ–Ω—ñ“£ –∞—Ç—ã“£...</div>
                <div class="option" onclick="checkAnswer(this, '–ë—ñ–∑–¥—ñ“£ –∞—Ç—ã–º—ã–∑...', false)">–ë—ñ–∑–¥—ñ“£ –∞—Ç—ã–º—ã–∑...</div>
            </div>
            <div class="xp-gained" id="xp-9">+15 XP (–ë–æ–Ω—É—Å!)</div>
            <button class="next-btn" onclick="nextQuestion(9)">–î–∞–ª–µ–µ</button>
        </div>

        <div id="question-10" class="question-container">
            <div class="question">–ß—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç "–ñ–∞“õ—Å—ã –∫“Ø–Ω!"?</div>
            <div class="options">
                <div class="option" onclick="checkAnswer(this, '–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏', false)">–°–ø–æ–∫–æ–π–Ω–æ–π –Ω–æ—á–∏</div>
                <div class="option" onclick="checkAnswer(this, '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ', false)">–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ</div>
                <div class="option" onclick="checkAnswer(this, '–î–æ–±—Ä—ã–π –¥–µ–Ω—å!', true)">–î–æ–±—Ä—ã–π –¥–µ–Ω—å!</div>
                <div class="option" onclick="checkAnswer(this, '–£–¥–∞—á–∏', false)">–£–¥–∞—á–∏</div>
            </div>
            <div class="xp-gained" id="xp-10">+10 XP</div>
            <button class="submit-btn" onclick="showResults()">–ó–∞–≤–µ—Ä—à–∏—Ç—å</button>
        </div>

        <div id="result-container" class="result-container">
            <div class="result-title">–¢–µ—Å—Ç –∑–∞–≤–µ—Ä—à–µ–Ω!</div>
            <div class="result-score">–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: <span id="final-score">0</span> XP</div>
            <div class="result-message" id="result-message"></div>
            <div class="streak-container">
                <span class="streak-icon">üî•</span>
                <span class="streak-count">1 –¥–µ–Ω—å –ø–æ–¥—Ä—è–¥</span>
            </div>
            <button class="restart-btn" onclick="restartTest()">–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞</button>
        </div>
    </div>
</div>

<script>
    let currentQuestion = 1;
    let totalQuestions = 10;
    let score = 0;
    let correctAnswers = 0;

    function checkAnswer(option, answer, isCorrect) {
        // Disable all options after selection
        const options = option.parentElement.querySelectorAll('.option');
        options.forEach(opt => {
            opt.style.pointerEvents = 'none';
        });

        // Mark the selected option
        if (isCorrect) {
            option.classList.add('correct');
            score += parseInt(option.parentElement.nextElementSibling.textContent.match(/\d+/)[0]);
            correctAnswers++;
            document.getElementById(`xp-${currentQuestion}`).style.display = 'block';
        } else {
            option.classList.add('incorrect');
            // Find and highlight the correct answer
            options.forEach(opt => {
                if (opt.getAttribute('onclick').includes('true')) {
                    opt.classList.add('correct');
                }
            });
        }
    }

    function nextQuestion(current) {
        document.getElementById(`question-${current}`).classList.remove('active');
        currentQuestion++;
        document.getElementById(`question-${currentQuestion}`).classList.add('active');
        updateProgress();
    }

    function updateProgress() {
        document.getElementById('question-count').textContent = `${currentQuestion}/${totalQuestions}`;
        document.getElementById('progress-fill').style.width = `${(currentQuestion/totalQuestions)*100}%`;
        document.getElementById('current-score').textContent = score;
    }

    function showResults() {
        document.getElementById(`question-${currentQuestion}`).classList.remove('active');
        document.getElementById('final-score').textContent = score;

        // Calculate percentage
        const percentage = Math.round((correctAnswers / totalQuestions) * 100);
        let message = '';

        if (percentage >= 90) {
            message = '–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞! üéâ –í—ã –æ—Ç–ª–∏—á–Ω–æ –∑–Ω–∞–µ—Ç–µ –æ—Å–Ω–æ–≤—ã –∫–∞–∑–∞—Ö—Å–∫–æ–≥–æ —è–∑—ã–∫–∞!';
        } else if (percentage >= 70) {
            message = '–•–æ—Ä–æ—à–∞—è —Ä–∞–±–æ—Ç–∞! üëç –ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å—Å—è, —á—Ç–æ–±—ã —É–ª—É—á—à–∏—Ç—å —Å–≤–æ–∏ –Ω–∞–≤—ã–∫–∏!';
        } else if (percentage >= 50) {
            message = '–ù–µ–ø–ª–æ—Ö–æ! üòä –ü–æ–≤—Ç–æ—Ä–∏—Ç–µ —Ç–µ–º—ã –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!';
        } else {
            message = '–ü—Ä–æ–¥–æ–ª–∂–∞–π—Ç–µ —Å—Ç–∞—Ä–∞—Ç—å—Å—è! üí™ –ü—Ä–∞–∫—Ç–∏–∫–∞ –≤–µ–¥–µ—Ç –∫ —Å–æ–≤–µ—Ä—à–µ–Ω—Å—Ç–≤—É!';
        }

        document.getElementById('result-message').innerHTML = `
            –í—ã –æ—Ç–≤–µ—Ç–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞ ${correctAnswers} –∏–∑ ${totalQuestions} –≤–æ–ø—Ä–æ—Å–æ–≤ (${percentage}%).<br>
            ${message}
        `;

        // Show celebration for good scores
        if (percentage >= 70) {
            const celebration = document.createElement('span');
            celebration.className = 'celebration';
            celebration.innerHTML = ' üéâ';
            document.getElementById('final-score').appendChild(celebration);
        }

        document.getElementById('result-container').style.display = 'block';
    }

    function restartTest() {
        // Reset all variables
        currentQuestion = 1;
        score = 0;
        correctAnswers = 0;

        // Reset UI
        document.getElementById('result-container').style.display = 'none';
        document.querySelectorAll('.question-container').forEach(q => {
            q.classList.remove('active');
            q.querySelectorAll('.option').forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.style.pointerEvents = 'auto';
            });
            q.querySelector('.xp-gained').style.display = 'none';
        });
        document.getElementById('question-1').classList.add('active');
        document.getElementById('current-score').textContent = '0';
        document.getElementById('progress-fill').style.width = '10%';
        document.getElementById('question-count').textContent = '1/10';
    }
</script>
</body>
</html>